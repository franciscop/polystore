var l={},g=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/iu;t.millisecond=t.ms=1;t.second=t.sec=t.s=t[""]=t.ms*1e3;t.minute=t.min=t.m=t.s*60;t.hour=t.hr=t.h=t.m*60;t.day=t.d=t.h*24;t.week=t.wk=t.w=t.d*7;t.year=t.yr=t.y=t.d*365.25;t.month=t.b=t.y/12;function t(e){if(e==null)return null;if(typeof e=="number")return e;e=e.toLowerCase().replace(/[,_]/g,"");let[u,y,i]=g.exec(e)||[];if(!i)return null;let c=t[i]||t[i.replace(/s$/,"")];if(!c)return null;let d=c*parseFloat(y,10);return Math.abs(Math.round(d))}l.expire=e=>{let u=async n=>{if(!await e.has(n))return null;let{data:a,expire:o}=await e.get(n);return o===null?a:o-new Date().getTime()<=0?null:a},y=async(n,a,{expire:o=null}={})=>{let r=t(o),f=r!==null?new Date().getTime()+r:null;return e.set(n,{expire:f,data:a})},i=async n=>await e.get(n)!==null,c=e.del,d=e.keys,s=e.clear;return{get:u,set:y,has:i,del:c,keys:d,clear:s}};l.memory=e=>({get:async n=>e.get(n)||null,set:async(n,a)=>e.set(n,a),has:async n=>e.has(n),del:async n=>e.delete(n),keys:async(n="")=>[...await e.keys()].filter(a=>a.startsWith(n)),clear:()=>e.clear()});l.localStorage=e=>({get:async n=>e[n]?JSON.parse(e[n]):null,set:async(n,a)=>e.setItem(n,JSON.stringify(a)),has:async n=>n in e,del:async n=>e.removeItem(n),keys:async(n="")=>Object.keys(e).filter(a=>a.startsWith(n)),clear:()=>e.clear()});l.cookie=()=>{let e=async s=>{let n=document.cookie.split("; ").filter(Boolean).find(a=>a.startsWith(s+"="))?.split("=")[1]||null;return JSON.parse(decodeURIComponent(n))},u=async(s,n,{expire:a=null}={})=>{let o=t(a),r=new Date().getTime(),f=o!==null?`; expires=${new Date(r+o).toUTCString()}`:"",p=encodeURIComponent(JSON.stringify(n));document.cookie=s+"="+p+f},y=async s=>(await c()).includes(s),i=async s=>u(s,"",{expire:-100}),c=async(s="")=>document.cookie.split(";").map(n=>n.split("=")[0].trim()).filter(Boolean).filter(n=>n.startsWith(s));return{get:e,set:u,has:y,del:i,keys:c,clear:async()=>{await Promise.all((await c()).map(i))}}};l.redis=e=>{let u=async a=>{let r=await(await e).get(a);return r?JSON.parse(r):null},y=async(a,o,{expire:r=null}={})=>{if(o===null||r===0)return c(a);let f=await e,p=t(r),m=p?Math.round(p/1e3):void 0;return f.set(a,JSON.stringify(o),{EX:m})},i=async a=>!!await(await e).exists(a),c=async a=>(await e).del(a);return{get:u,set:y,has:i,del:c,keys:async(a="")=>(await e).keys(a+"*"),clear:async()=>(await e).flushAll(),close:async()=>(await e).quit()}};function w(e){return!e||e instanceof Map?l.expire(l.memory(e||new Map)):typeof localStorage<"u"&&e===localStorage||typeof sessionStorage<"u"&&e===sessionStorage?l.expire(l.localStorage(e)):e==="cookie"?l.cookie():l.redis(e)}export{w as default};
//# sourceMappingURL=index.min.js.map
