var o={},m=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/iu;n.millisecond=n.ms=1;n.second=n.sec=n.s=n[""]=n.ms*1e3;n.minute=n.min=n.m=n.s*60;n.hour=n.hr=n.h=n.m*60;n.day=n.d=n.h*24;n.week=n.wk=n.w=n.d*7;n.year=n.yr=n.y=n.d*365.25;n.month=n.b=n.y/12;function n(t){if(t==null)return null;if(typeof t=="number")return t;t=t.toLowerCase().replace(/[,_]/g,"");let[u,l,r]=m.exec(t)||[];if(!r)return null;let c=n[r]||n[r.replace(/s$/,"")];if(!c)return null;let w=c*parseFloat(l,10);return Math.abs(Math.round(w))}o.expire=t=>{let u=async e=>{if(!await t.has(e))return null;let{data:a,expire:d}=await t.get(e);return d===null?a:d-new Date().getTime()<=0?null:a},l=async(e,a,{expire:d=null}={})=>{let s=n(d),i=s!==null?new Date().getTime()+s:null;return t.set(e,{expire:i,data:a})},r=async e=>await t.get(e)!==null,c=t.del,w=t.keys,y=t.clear;return{get:u,set:l,has:r,del:c,keys:w,clear:y}};o.memory=t=>({get:async e=>t.get(e)||null,set:async(e,a)=>t.set(e,a),has:async e=>t.has(e),del:async e=>t.delete(e),keys:async(e="")=>[...await t.keys()].filter(a=>a.startsWith(e)),clear:()=>t.clear()});o.storage=t=>({get:async e=>t[e]?JSON.parse(t[e]):null,set:async(e,a)=>t.setItem(e,JSON.stringify(a)),has:async e=>e in t,del:async e=>t.removeItem(e),keys:async(e="")=>Object.keys(t).filter(a=>a.startsWith(e)),clear:()=>t.clear()});o.cookie=()=>{let t=async y=>{let e=document.cookie.split("; ").filter(Boolean).find(a=>a.startsWith(y+"="))?.split("=")[1]||null;return JSON.parse(decodeURIComponent(e))},u=async(y,e,{expire:a=null}={})=>{let d=n(a),s=new Date().getTime(),i=d!==null?`; expires=${new Date(s+d).toUTCString()}`:"",f=encodeURIComponent(JSON.stringify(e));document.cookie=y+"="+f+i},l=async y=>(await c()).includes(y),r=async y=>u(y,"",{expire:-100}),c=async(y="")=>document.cookie.split(";").map(e=>e.split("=")[0].trim()).filter(Boolean).filter(e=>e.startsWith(y));return{get:t,set:u,has:l,del:r,keys:c,clear:async()=>{await Promise.all((await c()).map(r))}}};o.redis=t=>{let u=async a=>{let s=await(await t).get(a);return s?JSON.parse(s):null},l=async(a,d,{expire:s=null}={})=>{if(d===null||s===0)return c(a);let i=await t,f=n(s),p=f?Math.round(f/1e3):void 0;return i.set(a,JSON.stringify(d),{EX:p})},r=async a=>!!await(await t).exists(a),c=async a=>(await t).del(a);return{get:u,set:l,has:r,del:c,keys:async(a="")=>(await t).keys(a+"*"),clear:async()=>(await t).flushAll(),close:async()=>(await t).quit()}};o.localForage=t=>{let u=e=>t.getItem(e);return{get:u,set:(e,a)=>t.setItem(e,a),has:async e=>await u(e)!==null,del:e=>t.removeItem(e),keys:async(e="")=>(await t.keys()).filter(a=>a.startsWith(e)),clear:()=>t.clear()}};o.file=t=>{let u=(async()=>{let i=await import("node:fs/promises");return await i.writeFile(t.pathname,"{}",{flag:"wx"}).catch(f=>{if(f.code!=="EEXIST")throw f}),i})(),l=async()=>{let i=await(await u).readFile(t.pathname,"utf8");return i?JSON.parse(i):{}},r=async s=>{await(await u).writeFile(t.pathname,JSON.stringify(s,null,2))},c=async s=>(await l())[s]??null;return{get:c,set:async(s,i)=>{let f=await l();f[s]=i,await r(f)},has:async s=>await c(s)!==null,del:async s=>{let i=await l();delete i[s],await r(i)},keys:async(s="")=>{let i=await l();return Object.keys(i).filter(f=>f.startsWith(s))},clear:async()=>{await r({})}}};var g=async t=>t instanceof Map?o.expire(o.memory(t)):typeof localStorage<"u"&&t===localStorage||typeof sessionStorage<"u"&&t===sessionStorage?o.expire(o.storage(t)):t==="cookie"?o.cookie():t.defineDriver&&t.dropInstance&&t.INDEXEDDB?o.expire(o.localForage(t)):t.protocol&&t.protocol==="file:"?o.expire(o.file(t)):t.pSubscribe&&t.sSubscribe?o.redis(t):null;function h(t=new Map){return new Proxy({},{get:(u,l)=>async(...r)=>{let c=await g(await t);if(!c)throw new Error("Store is not valid");return!c[l]&&l==="close"?null:c[l](...r)}})}export{h as default};
//# sourceMappingURL=index.min.js.map
