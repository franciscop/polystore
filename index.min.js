var u={},m=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/iu;a.millisecond=a.ms=1;a.second=a.sec=a.s=a[""]=a.ms*1e3;a.minute=a.min=a.m=a.s*60;a.hour=a.hr=a.h=a.m*60;a.day=a.d=a.h*24;a.week=a.wk=a.w=a.d*7;a.year=a.yr=a.y=a.d*365.25;a.month=a.b=a.y/12;function a(t){if(t==null)return null;if(typeof t=="number")return t;t=t.toLowerCase().replace(/[,_]/g,"");let[y,r,o]=m.exec(t)||[];if(!o)return null;let i=a[o]||a[o.replace(/s$/,"")];if(!i)return null;let p=i*parseFloat(r,10);return Math.abs(Math.round(p))}u.expire=t=>{let y=async n=>{if(!await t.has(n))return null;let{data:e,expire:d}=await t.get(n);return d===null?e:d-new Date().getTime()<=0?null:e},r=async(n,e,{expire:d=null}={})=>{let s=a(d),l=s!==null?new Date().getTime()+s:null;return t.set(n,{expire:l,data:e})},o=async n=>await t.get(n)!==null,i=t.del,p=t.keys,c=t.clear;return{get:y,set:r,has:o,del:i,keys:p,clear:c}};u.memory=t=>({get:async n=>t.get(n)||null,set:async(n,e)=>t.set(n,e),has:async n=>t.has(n),del:async n=>t.delete(n),keys:async(n="")=>[...await t.keys()].filter(e=>e.startsWith(n)),clear:()=>t.clear()});u.storage=t=>({get:async n=>t[n]?JSON.parse(t[n]):null,set:async(n,e)=>t.setItem(n,JSON.stringify(e)),has:async n=>n in t,del:async n=>t.removeItem(n),keys:async(n="")=>Object.keys(t).filter(e=>e.startsWith(n)),clear:()=>t.clear()});u.cookie=()=>{let t=async c=>{let n=document.cookie.split("; ").filter(Boolean).find(e=>e.startsWith(c+"="))?.split("=")[1]||null;return JSON.parse(decodeURIComponent(n))},y=async(c,n,{expire:e=null}={})=>{let d=a(e),s=new Date().getTime(),l=d!==null?`; expires=${new Date(s+d).toUTCString()}`:"",f=encodeURIComponent(JSON.stringify(n));document.cookie=c+"="+f+l},r=async c=>(await i()).includes(c),o=async c=>y(c,"",{expire:-100}),i=async(c="")=>document.cookie.split(";").map(n=>n.split("=")[0].trim()).filter(Boolean).filter(n=>n.startsWith(c));return{get:t,set:y,has:r,del:o,keys:i,clear:async()=>{await Promise.all((await i()).map(o))}}};u.redis=t=>{let y=async e=>{let s=await(await t).get(e);return s?JSON.parse(s):null},r=async(e,d,{expire:s=null}={})=>{if(d===null||s===0)return i(e);let l=await t,f=a(s),w=f?Math.round(f/1e3):void 0;return l.set(e,JSON.stringify(d),{EX:w})},o=async e=>!!await(await t).exists(e),i=async e=>(await t).del(e);return{get:y,set:r,has:o,del:i,keys:async(e="")=>(await t).keys(e+"*"),clear:async()=>(await t).flushAll(),close:async()=>(await t).quit()}};u.localForage=t=>{let y=n=>t.getItem(n);return{get:y,set:(n,e)=>t.setItem(n,e),has:async n=>await y(n)!==null,del:n=>t.removeItem(n),keys:async(n="")=>(await t.keys()).filter(e=>e.startsWith(n)),clear:()=>t.clear()}};u.cloudflare=t=>{let y=async c=>{let n=await t.get(c);return n?JSON.parse(n):null},r=async(c,n,{expire:e})=>{if(n===null||e===0)return i(c);let d=await t,s=a(e),l=s?Math.round(s/1e3):void 0;return d.set(c,JSON.stringify(n),{expirationTtl:l})},o=c=>!!t.get(c),i=c=>t.delete(c);return{get:y,set:r,has:o,del:i,keys:c=>t.list({prefix:c}),clear}};u.file=t=>{let y=(async()=>{let l=await import(["node:fs","promises"].join("/"));return await l.writeFile(t.pathname,"{}",{flag:"wx"}).catch(f=>{if(f.code!=="EEXIST")throw f}),l})(),r=async()=>{let l=await(await y).readFile(t.pathname,"utf8");return l?JSON.parse(l):{}},o=async s=>{await(await y).writeFile(t.pathname,JSON.stringify(s,null,2))},i=async s=>(await r())[s]??null;return{get:i,set:async(s,l)=>{let f=await r();f[s]=l,await o(f)},has:async s=>await i(s)!==null,del:async s=>{let l=await r();delete l[s],await o(l)},keys:async(s="")=>{let l=await r();return Object.keys(l).filter(f=>f.startsWith(s))},clear:async()=>{await o({})}}};var g=async t=>t instanceof Map?u.expire(u.memory(t)):typeof localStorage<"u"&&t===localStorage||typeof sessionStorage<"u"&&t===sessionStorage?u.expire(u.storage(t)):t==="cookie"?u.cookie():t.defineDriver&&t.dropInstance&&t.INDEXEDDB?u.expire(u.localForage(t)):t.protocol&&t.protocol==="file:"?u.expire(u.file(t)):t.pSubscribe&&t.sSubscribe?u.redis(t):t?.constructor?.name==="KvNamespace"?u.cloudflare(t):null;function h(t=new Map){return new Proxy({},{get:(y,r)=>async(...o)=>{let i=await g(await t);if(!i)throw new Error("Store is not valid");return!i[r]&&r==="close"?null:i[r](...o)}})}export{h as default};
//# sourceMappingURL=index.min.js.map
